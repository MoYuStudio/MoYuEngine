# Surface 图层

## Background 背景层

背景图片（比如游戏主菜单背景）&可移动的背景图片（比如游戏主界面的星空）

## Map 地图层

游戏地图相关

## Info 信息层

游戏信息

## GUI UI层

游戏UI&用户交互&菜单

### Menu UI 菜单UI

#### Main Menu 主菜单

新建游戏 继续游戏

设置 退出 关于

#### Create New Map Menu 新建地图菜单

直接新建地图 or 输入Seed生成种子地图

提供 一些官方种子（非当下必要）

#### Stop Menu 暂停菜单

游戏暂停时 半透明覆盖游戏画面 提供玩家按钮&部分游戏信息

按钮 

继续游戏&保存游戏&设置&返回主界面&退出游戏

游戏信息 

游玩时间（游戏内时间）&本国货币&通用货币&人口 

&经济（玩家单位时间内的生产速度 比如 100块/每天 100G/preDay）

&拥有的土地总数&已开发的土地总数

#### Setting Main Menu 设置主菜单

分辨率

自动保存频率

### Game UI 游戏UI

#### Game Event Menu 游戏事件菜单

当玩家点击瓷砖地图时 弹出 建造&拆除&收获 按钮

#### Main Game Menu 主游戏菜单

左上 游戏时间

左下 菜单按钮

右上 本国货币&通用货币&人口

右下 pass

#### Game Menu 主游戏菜单

依附于Main Game Menu 主游戏菜单

左 按钮 建造 经济 科技 军事 信息 其他

#### Game Build Menu 建造菜单

一个窗口 玩家 选择需要建造的东西（图标+价格+占地面积）选择完毕后 自动跳回游戏主界面（类 开罗游戏建造菜单）

## Popup 弹窗层

提示&警告弹窗

#### 保存成功弹窗

## Transition 转场层

渐变黑色 等

# Event 事件

## 鼠标输入

瓷砖地图的点击

不同按钮的点击

菜单滚轮的输入

## 键盘输入

WASD 上下左右 移动视角

Esc 暂停菜单

# System 系统

## 建造系统

### Tileland 土地瓷砖

土地瓷砖 可以建造 建筑瓷砖

### Tile 建筑瓷砖

建筑瓷砖 在 土地瓷砖 上 建造&拆除&收获

建筑瓷砖 判定 土地瓷砖可否建造（单个or一定范围）

建筑瓷砖 的 建筑生成的资源 and 生成时间（时间码）

建筑瓷砖 的 动画（非当下必要）

### Pretile 预览瓷砖

预览瓷砖 红绿 判定 土地瓷砖可否建造 给予玩家反馈

预览瓷砖 预览建筑瓷砖（非当下必要）

## 经济系统

建造建筑 花钱

拆除建筑 返钱

收获建筑 收钱

交易所（非当下必要）

## 科技系统

（非当下必要）

## 军事系统

（非当下必要）

## 随机系统

（非当下必要）

# 代码框架

## config

### surface

游戏画面的刷新对象，应包含位置信息，贴图引用信息，事件处理方法

分类：

#### background.py

#### info.py

#### map.py

#### gui.py (menu_ui,game_ui)

#### popup.py

#### transition.py

### event

游戏事件分发对象，用堆栈（暂定）来分发事件，可考虑让它传递不同surface之间的交互参数。处理存档读档。

分类：

#### mainevent.py

### system

管理数据更新，资源加载等

分类：

#### ###info.py

#### assets.py （载入贴图）

#### setting.py（设置相关，比如窗口大小，贴图缩放大小）

#### buildings.py（管理建筑数据）

#### economics.py（管理经济数据）

## data

存放玩家存档

## main.py

游戏主逻辑，引用root模组，负责游戏初始化、运行等主逻辑

